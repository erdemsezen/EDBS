<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>EDBS | Main Page</title>
<link rel="stylesheet" href="css/admin.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
</head>
</head>
<body>

<div class="sidebar" id="sidebar">

    <!-- Fetch these values from the database -->

    <div class="circle-frame" >
        <img src="" alt="Your Image" id="profilepic">
    </div>

    <h3 class="username" id="username">Name Surname</h3>
    <h4 class="rank" id="position">-Position-</h4>

    <h2 id="userLocation">E-DBS<br>Location</h2>   

    <ul>
        <li><a href="#" onclick="showDashboard('Backup Requests')">Backup Requests</a></li>
        <li><a href="#" onclick="showDashboard('Make Request')">Make Request</a></li>
        <li><a href="#" onclick="showDashboard('Backup Files')">Backup Files</a></li>
        <li><a href="#" onclick="showDashboard('Upload Backup')">Upload Backup</a></li>
        <li><a href="#" onclick="logout()">Log out</a></li>

    </ul>
</div>

<div class="content">

    <div class="header">
        <h1 id="dashboardTitle">Backup Requests</h1>
    </div>

    <div class="dashboard" id="backuprequests">
        <!-- TODO: filter dropdown menu and search -->
        <div class="table-container">
            <table class="sortable-table">
                <thead> 
                    <tr>
                        <th data-sort-by="r.requestID">Request ID</th>
                        <th data-sort-by="r.message">Message</th>
                        <th data-sort-by="r.requestDate">Date</th>
                        <th data-sort-by="s.location">Location</th>
                        <th data-sort-by="r.status">Status</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
    </div>

    <div class="dashboard" id="makerequest" style="display: none;">
        <div class="form-container">
            <form id="requestForm">
              <label for="location">Location:</label>
              <select id="location" name="location">
                <option value="1">Enka Merkez</option>
                <option value="2">Moscow</option>
                <option value="3">Munich</option>
                <option value="4">London</option>
              </select><br>
              
              <label>Request:</label><br><br>

              <input type="radio" id="requestNow" name="requestType" value="now" checked>
              <label for="requestNow">Request Now</label><br><br>
              
              <input type="radio" id="requestLater" name="requestType" value="later">
              <label for="requestLater">Request for a different time</label>
              <br>

              <div class="date-selection">
                <label for="backupDate">Select Date:</label>
                <input type="date" id="backupDate" name="backupDate">
                
                <label for="repeat">Repeat periodically:</label>
                <select id="repeat" name="repeat">
                  <option value="none">None</option>
                  <option value="everyday">Every day</option>
                  <option value="everyweek">Every week</option>
                  <option value="everymonth">Every month</option>
                  <option value="everyyear">Every year</option>
                </select>
              </div>
              
              <label for="backupMessage">Write backup message:</label><br>
              <textarea type="text" rows = "5" cols = "70" id="backupMessage" name="backupMessage"></textarea>
              <br>

              <button type="submit" class="submit-btn">Submit</button>
            </form>
            <p></p>
        </div>
        <p class="periodicrequests">Periodic Requests:</p>
        <div class="table-container">
            <table class="sortable-table">
                <thead>
                  <tr>
                    <th data-sort-by="r.message">Message</th>
                    <th data-sort-by="s.location">Location</th>
                    <th data-sort-by="r.period">Period</th>
                    <th data-sort-by="nextDate">Next Request</th>
                    <th></th>
                  </tr>
                </thead>
                <tbody></tbody>
              </table>
        </div>
    </div>

    <div class="dashboard" id="backupfiles" style="display: none;">
        <div class="table-container" id="logstable">
            <table class="sortable-table" >
                <thead> 
                    <tr>
                        <th data-sort-by="b.backupID">Backup ID</th>
                        <th data-sort-by="s.location">Location</th>
                        <th data-sort-by="u.username">Taken by</th>
                        <th data-sort-by="b.backupDate">Date</th>
                        <th>Time</th>
                        <th></th>
                      </tr>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>

    </div>

    <div class="dashboard" id="uploadbackup" style="display: none;">
        <div class="form-container">
            <h2>File Upload</h2>
            <form action="/upload" method="POST" enctype="multipart/form-data">
                <input type="file" name="file" required>
                <button type="submit">Upload File</button>
            </form>
            <p id="statusMessage"></p>
        </div>
    </div>

</div>

<script src="js/admin.js"></script>

</body>
</html>
