<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>EDBS | Main Page</title>
<link rel="stylesheet" href="css/home.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
</head>
</head>
<body>

<div class="sidebar" id="sidebar">

    <!-- Fetch these values from the database -->

    <div class="circle-frame" >
        <img src="" alt="Your Image" id="profilepic">
    </div>

    <h3 class="username" id="username"></h3>
    <h4 class="rank" id="position"></h4>

    <h2 id="userLocation"></h2>   

    <ul>
        <li><a href="#" onclick="showDashboard('Backup Requests')">Backup Requests</a></li>
        <li><a href="#" onclick="showDashboard('Backup Files')">Backup Files</a></li>
        <li><a href="#" onclick="showDashboard('Upload Backup')">Upload Backup</a></li>
        <li><a href="#" onclick="logout()">Log out</a></li>

    </ul>
</div>

<div class="content">

    <div class="header">
        <h1 id="dashboardTitle">Backup Requests</h1>
    </div>

    <div class="dashboard" id="backuprequests">
        <!-- TODO: filter dropdown menu and search -->
        <div class="table-container">
            <table class="sortable-table">
                <thead> 
                    <tr>
                        <th data-sort-by="r.message">Message</th>
                        <th data-sort-by="r.requestDate">Date</th>
                        <th data-sort-by="r.username">Sender</th>
                        <th data-sort-by="r.status">Status</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>

        <div id="backupPopup" class="popup">
            <span class="close" id="closeBackupPopup">&times;</span>
            <div class="popup-content">
                <!-- <div id="dropzone">
                    <p>Drag and drop files here</p>
                </div> -->
                <h2>File Upload</h2>
                <form action="/upload" method="POST" enctype="multipart/form-data" id="uploadForm">
                    <input type="file" name="file" required>
                    <input type="hidden" name="requestID" id="requestID" value="null">
                    <button type="submit">Upload File</button>
                </form>
            </div>
        </div>
        <div id="overlay1" class="overlay"></div>

    </div>

    <div class="dashboard" id="backupfiles" style="display: none;">
        <div class="table-container" id="logstable">
            <table class="sortable-table" >
                <thead> 
                    <tr>
                        <th data-sort-by="s.location">Location</th>
                        <th data-sort-by="b.backupDate">Date</th>
                        <th>Time</th>
                        <th></th>
                      </tr>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>

    </div>

    <div class="dashboard" id="uploadbackup" style="display: none;">
        <button onclick="uploadBackup(this)">Click this button to upload backup.</button>
        <p id="statusMessage"></p>

        <div id="uploadPopup" class="popup">
            <span class="close" id="closeUploadPopup">&times;</span>
            <div class="popup-content">
                <!-- <div id="dropzone">
                    <p>Drag and drop files here</p>
                </div> -->
                <h2>File Upload</h2>
                <form action="/upload" method="POST" enctype="multipart/form-data">
                    <input type="file" name="file" required>
                    <button type="submit">Upload File</button>
                </form>
            </div>
        </div>
        <div id="overlay2" class="overlay"></div>
    </div>

</div>

<script src="js/home.js"></script>

</body>
</html>
